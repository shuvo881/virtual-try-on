{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/tryron.css' %}">
{% endblock %}

{% block content %}
<div class="tryron-container">
    <div class="main-content">
        <div class="video-section">
            <div class="video-container">
                <video id="video" autoplay muted playsinline></video>
                <canvas id="canvas"></canvas>
            </div>
            <div class="video-controls">
                <button id="start-camera" class="btn btn-primary">📹 Start Camera</button>
                <button id="stop-camera" class="btn btn-secondary" disabled>⏹️ Stop Camera</button>
                <button id="take-photo" class="btn btn-success" disabled>📸 Take Photo</button>
            </div>
        </div>
        
        <div class="controls-section">
            <div class="model-selector">
                <h3>👓 Accessories</h3>
                <div class="category-tabs">
                    <button class="tab-btn active" data-category="glasses">Glasses</button>
                    <button class="tab-btn" data-category="hats">Hats</button>
                </div>
                
                <div class="models-grid" id="models-container">
                    <!-- Models will be loaded here -->
                </div>
            </div>
            
            <div class="settings-panel">
                <h3>⚙️ Settings</h3>
                <div class="setting-group">
                    <label>Scale: <span id="scale-value">1.0</span></label>
                    <input type="range" id="scale-slider" min="0.5" max="2" step="0.1" value="1">
                </div>
                <div class="setting-group">
                    <label>Position X: <span id="pos-x-value">0</span></label>
                    <input type="range" id="pos-x-slider" min="-50" max="50" step="1" value="0">
                </div>
                <div class="setting-group">
                    <label>Position Y: <span id="pos-y-value">0</span></label>
                    <input type="range" id="pos-y-slider" min="-50" max="50" step="1" value="0">
                </div>
            </div>
            
            <div class="upload-section">
                <h3>📤 Upload Custom Model</h3>
                <input type="file" id="model-upload" accept=".glb,.gltf">
                <input type="text" id="model-name" placeholder="Model Name">
                <select id="model-category">
                    <option value="glasses">Glasses</option>
                    <option value="hats">Hats</option>
                </select>
                <button id="upload-btn" class="btn btn-primary">Upload</button>
            </div>
        </div>
    </div>
    
    <div class="status-bar">
        <div id="status">Ready to start! Click "Start Camera" to begin.</div>
        <div id="face-info"></div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/face-tracker.js' %}"></script>
<script src="{% static 'js/model-loader.js' %}"></script>
<script src="{% static 'js/tryron-app.js' %}"></script>
{% endblock %}